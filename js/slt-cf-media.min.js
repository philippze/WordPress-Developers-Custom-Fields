jQuery(document).ready(function(c){var b=[];var a=wp.media.model.settings.post.id;c(document.body).on("click.sltcfOpenMediaManager",".slt-cf-fs-button",function(l){l.preventDefault();var i=c(this);var g=i.siblings(".slt-cf-fs-value");var d=i.siblings(".slt-cf-allow-multiple");var j=i.attr("id").split("_").slice(0,-1).join("_");var h=true;var k="Select file";var f="";if(typeof slt_cf_media["attach_to_post__"+j]!="undefined"){h=(slt_cf_media["attach_to_post__"+j]=="yes")}if(typeof slt_cf_media["dialog_title__"+j]!="undefined"){k=slt_cf_media["dialog_title__"+j]}if(typeof slt_cf_media["restrict_to_type__"+j]!="undefined"){f=slt_cf_media["restrict_to_type__"+j]}if(typeof slt_cf_media["allow_multiple__"+j]!="undefined"){allow_multiple=slt_cf_media["allow_multiple__"+j]}if(b[j]){if(!h){b[j].uploader.uploader.param("post_id",0)}else{b[j].uploader.uploader.param("post_id",a)}b[j].open();return}else{if(!h){wp.media.model.settings.post.id=0}else{wp.media.model.settings.post.id=a}}b[j]=wp.media.frames.slt_cf_media_frame=wp.media({className:"media-frame slt-cf-media-frame",frame:"select",multiple:allow_multiple,title:k,library:{type:f}});b[j].on("select",function(){var q,p,o;var e=[];var n=[];var m=b[j].state().get("selection");for(o=0;o<m.length;o++){n.push(m.models[o].toJSON().id)}g.val(n.join(","));q=c("#"+j+"_preview");p=c("#"+j+"_preview-size").val();q.html("");for(o=0;o<m.length;o++){c.ajax({type:"POST",url:slt_cf_media.ajaxurl,data:{id:n[o],size:p,action:"slt_cf_fs_get_file"},success:function(r){q.append(r)}})}});b[j].open()})});